<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>{{ manual.title }}</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/0de0c57aa6.js" crossorigin="anonymous"></script>
    <style>
        .video-scroll-container {
            overflow-x: auto;
            display: flex;
            gap: 1rem;
            scroll-behavior: smooth;
        }

        .video-container {
            flex: 0 0 auto;
            width: 350px;
            height: 200px;
        }

        .video-container iframe {
            width: 100%;
            height: 100%;
            border-radius: 10px;
        }
    </style>
</head>

<body class="bg-light d-flex flex-column min-vh-100">

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="#">
                <i class="fa-solid fa-atom me-2"></i>
                <span>Digital Lab - NITJ</span>
            </a>
            <div class="ms-auto d-flex">
                <a href="#" class="btn btn-outline-light me-2">
                    <i class="fa-solid fa-download me-1"></i>Download
                </a>
                <a href="#tutorials" class="btn btn-outline-light me-2">
                    <i class="fa-brands fa-youtube me-1"></i>Tutorial
                </a>
                <a href="{{ url_for('chat_redirect', manual_id=manual.id) }}" target="_blank"
                    class="btn btn-light text-primary">
                    <i class="fa-solid fa-robot me-1"></i>Chat with AI
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container my-5 flex-grow-1">
        <div class="card shadow">
            <div class="card-body">
                <h2 class="card-title text-center mb-4">{{ manual.title }}</h2>

                <p><strong>ID:</strong> {{ manual.id }}</p>

                <div class="mb-3">
                    <h5>Apparatus</h5>
                    <p>{{ manual.apparatus | replace('\n', '<br>') | safe }}</p>
                </div>

                <div class="mb-3">
                    <h5>Theory</h5>
                    <p>{{ manual.theory | replace('\n', '<br>') | safe }}</p>
                </div>

                <div class="mb-3">
                    <h5>Procedure</h5>
                    <p>{{ manual.procedures | replace('\n', '<br>') | safe }}</p>
                </div>

                <div class="mb-3">
                    <h5>Precautions</h5>
                    <p>{{ manual.precautions | replace('\n', '<br>') | safe }}</p>
                </div>
            </div>
        </div>

        <!-- YouTube Tutorials Section -->
        <div id="tutorials" class="mt-5">
            <h3 class="mb-4 text-center">Related YouTube Videos</h3>
            {% if videos %}
            <div class="d-flex justify-content-center">
                <div class="video-scroll-container px-2">
                    {% for video in videos %}
                    <div class="video-container">
                        <iframe src="{{ video.url }}" frameborder="0" allowfullscreen></iframe>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% else %}
            <p class="text-center">No related videos found.</p>
            {% endif %}
        </div>
    </div>

    <!-- Footer OUTSIDE the container -->
    <footer class="bg-primary text-white text-center py-3 mt-auto">
        <div class="container d-flex flex-column flex-md-row justify-content-between align-items-center">
            <div>Made in NITJ</div>
            <div>
                <a href="https://github.com/yourusername" target="_blank" class="text-white text-decoration-none ms-2">
                    <i class="fab fa-github fa-lg"></i>
                </a>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
